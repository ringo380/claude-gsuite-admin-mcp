[tool:pytest]
# Test discovery
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Test execution
addopts =
    --verbose
    --tb=short
    --strict-markers
    --strict-config
    --disable-warnings
    --color=yes
    --cov=src/claude_gsuite_admin
    --cov-report=html
    --cov-report=term-missing
    --cov-fail-under=70

# Markers for test categorization
markers =
    unit: Unit tests that don't require external services
    integration: Integration tests that interact with Google APIs
    auth: Authentication and OAuth flow tests
    users: User management functionality tests
    groups: Group management functionality tests
    org_units: Organizational unit management tests
    devices: Device management functionality tests
    reports: Reports and auditing functionality tests
    security: Security management functionality tests
    slow: Tests that take a long time to run
    requires_auth: Tests that require valid OAuth authentication
    requires_admin: Tests that require admin privileges

# Test output
console_output_style = progress
junit_family = xunit2

# Warnings configuration
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::UserWarning:google.*
    ignore::UserWarning:oauth2client.*

# Minimum Python version
minversion = 3.10

# Test timeout (in seconds)
timeout = 300

# Coverage configuration (enabled)
# Coverage is enabled by default for comprehensive testing
# Use --no-cov to disable coverage reporting
[tool.coverage.run]
source = src/claude_gsuite_admin
omit =
    tests/*
    */test_*
    */__pycache__/*
    */migrations/*
    */venv/*
    */env/*

[tool.coverage.report]
exclude_lines =
    pragma: no cover
    def __repr__
    raise AssertionError
    raise NotImplementedError
    if __name__ == .__main__.: